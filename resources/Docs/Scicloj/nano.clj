[{:code {:label "Code", :opts {:order :row, :eltsper 1, :size "auto", :wrapfn {:tid :code, :fn [quote editor-repl-tab], :layout :left-right, :ns aerial.saite.usercode, :width "730px", :src "\n(def rRNA-dist\n  (sc/read-data \"~/Dropbox/Projects/saite/Nano/rRNA-dist.clj\"))\n\n(def CDS-dist\n  (sc/read-data \"~/Dropbox/Projects/saite/Nano/CDS-dist.clj\"))\n\n(def unmapped-dist\n  (sc/read-data \"~/Dropbox/Projects/saite/Nano/unmapped-dist.clj\"))\n\n\n(count @CDS-dist)\n(->> @CDS-dist (sort-by :y >) (take-while #(-> % :y (>= 500)))) count)\n(->> @CDS-dist (sort-by :y >) (drop-while #(-> % :y (> 10))) count)\n\n(def rcnt-dist\n  (reduce (fn[M m]\n            (let [rcnt (m :y)]\n              (assoc M rcnt (inc(get M rcnt 0)))))\n          {}\n          @CDS-dist))\n(count rcnt-dist)\n(->> rcnt-dist (sort-by second >) (take 20))\n(->> rcnt-dist (filter (fn[[k v]] (= v 1))) count)\n\n\n(hc/xform\n ht/vconcat-chart\n :FID :f2 :VID :v2\n :TITLE \"Nanopore CDS gene distribution\"\n :DATA (->> @CDS-dist (sort-by :y >)\n         (take-while #(> (% :y) 500)))\n :VCONCAT\n [(hc/xform\n   ht/bar-chart :WIDTH 1000\n   :XTYPE \"nominal\" :XTITLE \"rRNA\" :YTITLE \"Read Count\"\n   :XSORT {:field :y :order \"descending\"}\n   :TRANSFORM [{:filter {:selection \"brush\"}}])\n  (hc/xform\n   ht/bar-chart\n   :WIDTH 1000, :HEIGHT 60\n   :XTYPE \"nominal\" :XTITLE \"rRNA\" :YTITLE \"Read Count\"\n   :XSORT {:field :y :order \"descending\"}\n   :SELECTION {:brush {:type \"interval\", :encodings [\"x\"]}})])\n\n(md \"hi there\")\n\n", :out-height "700px", :eid "ed-code", :height "700px"}}, :specs []}} {:assigned {:label "Assigned", :opts {:order :row, :eltsper 1, :size "auto", :wrapfn {:tid :assigned, :$split 33, :fn [quote interactive-doc-tab], :ns aerial.saite.usercode, :width "730px", :src "\n\n(hc/xform\n ht/bar-chart\n :FID :f1 :VID :v1\n :TITLE \"Nanopore rRNA distribution\"\n :XTYPE \"nominal\" :XTITLE \"rRNA\" :YTITLE \"Read Count\"\n :XSORT {:field :y :order \"descending\"}\n :DATA (->> @rRNA-dist (sort-by :y >)))\n\n(hc/xform\n ht/vconcat-chart\n :FID :f2 :VID :v2\n :TOP \n '[[md\n \"\n * Total CDS genes with read counts: 1822\n    * With at least 500 : 45\n    * With at least 200 : 143\n    * with at least 100 : 284\n    * with at **most** 10 : 733\n \"]]\n :TITLE \"Nanopore CDS gene distribution\"\n :DATA (->> @CDS-dist (sort-by :y >)\n         (take-while #(> (% :y) 500)))\n :VCONCAT\n [(hc/xform\n   ht/bar-chart :WIDTH 1000\n   :XTYPE \"nominal\" :XTITLE \"CDS gene\" :YTITLE \"Read Count\"\n   :XSORT {:field :y :order \"descending\"}\n   :TRANSFORM [{:filter {:selection \"brush\"}}])\n  (hc/xform\n   ht/bar-chart\n   :WIDTH 1000, :HEIGHT 60\n   :XTYPE \"nominal\" :XTITLE \"rRNA\" :YTITLE \"Read Count\"\n   :XSORT {:field :y :order \"descending\"}\n   :SELECTION {:brush {:type \"interval\", :encodings [\"x\"]}})])\n\n\n(hc/xform\n ht/bar-chart :WIDTH 1000\n :FID :f3 :VID :v3\n :TITLE \"Nanopore read count distribution\"\n :XTITLE \"Read count\" :YTITLE \"Number\"\n :XSORT {:field :y :order \"descending\"}\n :DATA (->> rcnt-dist (mapv (fn[[x y]] {:x x :y y}))\n         (sort-by :y >)))", :out-height "100px", :eid "ed-assigned", :height "700px"}}, :specs [{:encoding {:y {:field "y", :type "quantitative", :axis {:title "Read Count"}}, :x {:field "x", :type "nominal", :axis {:title "rRNA"}, :sort {:field :y, :order "descending"}}, :tooltip [{:field "x", :type "nominal"} {:field "y", :type "quantitative"}]}, :usermeta {:frame {:pos :after, :at :end, :fid :f1}, :vid :v1, :session-name "Exploring", :opts {:mode "vega-lite", :source false, :export {:png true, :svg true}, :renderer "canvas", :scaleFactor 1, :editor true}, :msgop :tabs, :tab {:label "Expl1", :id :expl1, :opts {:eltsper 2, :size "auto", :order :row}}}, :mark {:type "bar"}, :width 400, :background "floralwhite", :title {:text "Nanopore rRNA distribution"}, :height 300, :data {:values [{:y 1383104, :x "SP_rrnaA23S"} {:y 469627, :x "SP_rrnaC23S"} {:y 468932, :x "SP_rrnaD23S"} {:y 467713, :x "SP_rrnaB23S"} {:y 214444, :x "SP_rrnaA16S"} {:y 73142, :x "SP_rrnaB16S"} {:y 72409, :x "SP_rrnaD16S"} {:y 71825, :x "SP_rrnaC16S"} {:y 6868, :x "SP_rrnaA5S"} {:y 2655, :x "SP_rrnaB5S"} {:y 2615, :x "SP_rrnaC5S"} {:y 2536, :x "SP_rrnaD5S"}]}} {:usermeta {:frame {:top [[md "\n * Total CDS genes with read counts: 1822\n    * With at least 500 : 45\n    * With at least 200 : 143\n    * with at least 100 : 284\n    * with at **most** 10 : 733\n "]], :pos :after, :at :end, :fid :f2}, :vid :v2, :session-name "Exploring", :opts {:mode "vega-lite", :source false, :export {:png true, :svg true}, :renderer "canvas", :scaleFactor 1, :editor true}, :msgop :tabs, :tab {:label "Expl1", :id :expl1, :opts {:eltsper 2, :size "auto", :order :row}}}, :config {:bar {:discreteBandSize 5, :binSpacing 1, :continuousBandSize 5}}, :width 400, :background "floralwhite", :title {:text "Nanopore CDS gene distribution"}, :vconcat [{:encoding {:y {:field "y", :type "quantitative", :axis {:title "Read Count"}}, :x {:field "x", :type "nominal", :axis {:title "rRNA"}, :sort {:field :y, :order "descending"}}, :tooltip [{:field "x", :type "nominal"} {:field "y", :type "quantitative"}]}, :transform [{:filter {:selection "brush"}}], :usermeta {:frame {:pos :after, :at :end}, :session-name "Exploring", :opts {:mode "vega-lite", :source false, :export {:png true, :svg true}, :renderer "canvas", :scaleFactor 1, :editor true}, :msgop :tabs, :tab {:label "Expl1", :id :expl1, :opts {:eltsper 2, :size "auto", :order :row}}}, :mark {:type "bar"}, :width 1000, :background "floralwhite", :height 300} {:encoding {:y {:field "y", :type "quantitative", :axis {:title "Read Count"}}, :x {:field "x", :type "nominal", :axis {:title "rRNA"}, :sort {:field :y, :order "descending"}}, :tooltip [{:field "x", :type "nominal"} {:field "y", :type "quantitative"}]}, :usermeta {:frame {:pos :after, :at :end}, :session-name "Exploring", :opts {:mode "vega-lite", :source false, :export {:png true, :svg true}, :renderer "canvas", :scaleFactor 1, :editor true}, :msgop :tabs, :tab {:label "Expl1", :id :expl1, :opts {:eltsper 2, :size "auto", :order :row}}}, :mark {:type "bar"}, :width 1000, :background "floralwhite", :selection {:brush {:type "interval", :encodings ["x"]}}, :height 60}], :height 300, :data {:values [{:y 396745, :x "F32-SP0873-SP0874"} {:y 13277, :x "SP_1414"} {:y 12739, :x "SP_1572"} {:y 6771, :x "SP_1626"} {:y 4452, :x "SP_1102"} {:y 3855, :x "SP_0798"} {:y 3161, :x "SP_1345"} {:y 2227, :x "R03-SP1355-SP1356"} {:y 1790, :x "SP_2012"} {:y 1763, :x "SP_1739"} {:y 1726, :x "SP_0240"} {:y 1687, :x "SP_1293"} {:y 1669, :x "SP_2216"} {:y 1663, :x "SP_1655"} {:y 1544, :x "SP_0441"} {:y 1531, :x "F07-SP0239-SP0240"} {:y 1494, :x "SP_0861"} {:y 1450, :x "SP_0294"} {:y 1426, :x "SP_0208"} {:y 1347, :x "SP_0198"} {:y 1308, :x "SP_0730"} {:y 1307, :x "SP_1882"} {:y 1287, :x "SP_0487"} {:y 1235, :x "SP_2215"} {:y 1215, :x "SP_2239"} {:y 1209, :x "SP_1299"} {:y 1207, :x "SP_0862"} {:y 1204, :x "SP_0974"} {:y 1048, :x "SP_0234"} {:y 1006, :x "SP_0944"} {:y 940, :x "SP_0981"} {:y 837, :x "SP_0004"} {:y 827, :x "SP_1032"} {:y 818, :x "F38-SP1012-SP1013"} {:y 817, :x "SP_1540"} {:y 772, :x "SP_1489"} {:y 767, :x "F59-SP0915-SP0916"} {:y 666, :x "SP_1625"} {:y 665, :x "SP_1012"} {:y 646, :x "SP_2063"} {:y 545, :x "SP_1586"} {:y 536, :x "SP_0107"} {:y 515, :x "SP_2009"} {:y 511, :x "SP_1106"} {:y 508, :x "SP_1923"}]}}]}}]
